<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>×’×¨×¤×™ ×§×˜×’×•×¨×™×•×ª</title>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&family=Rubik:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <style>
    html, body {
      background: var(--bg-gradient);
    }
    header {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      width: 100%;
      max-width: 600px;
      margin: 0 auto 24px auto;
      height: 60px;
    }
    .header-layout {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      height: 100%;
      padding: 0 15px;
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .header-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    header h1 {
      font-size: var(--header-size);
      font-weight: 700;
      text-align: center;
      margin: 0 10px;
    }
    .header-icon {
      font-size: var(--header-icon-size);
      color: var(--accent);
      filter: drop-shadow(0 1px 2px rgba(0,0,0,0.13));
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .cat-toggle, .theme-toggle, .settings-toggle {
      width: 44px; 
      height: 44px; 
      border-radius: 50%; 
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }
    .theme-toggle { 
      background: var(--text, #f5f6fa); 
    }
    .theme-toggle::after {
      content: "";
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: white;
    }
    .cat-toggle { 
      background: #ff9800; 
    }
    .cat-toggle::after {
      content: "";
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: white;
    }
    .settings-toggle { 
      background: #1976d2; 
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .settings-toggle i { 
      color: #fff; 
      font-size: 1.3rem; 
      display: flex;
      align-items: center;
      justify-content: center;
      width: 24px;
      height: 24px;
    }
    html.light-theme .theme-toggle {
      background: #232526;
    }
    html.light-theme .theme-toggle::after,
    html.light-theme .cat-toggle::after {
      background: white;
    }
    @media (max-width: 500px) {
      .cat-toggle, .theme-toggle, .settings-toggle {
        width: 44px;
        height: 44px;
      }
      .cat-toggle::after, .theme-toggle::after {
        width: 12px;
        height: 12px;
      }
      .settings-toggle i {
        font-size: 1.3rem;
      }
      .header-left {
        gap: 8px;
      }
      header h1 {
        font-size: 1.6rem;
        margin: 0 8px;
      }
    }
    @supports (-webkit-touch-callout: none) {
      .card {
        padding-bottom: 70px;
      }
      html {
        position: fixed;
        height: 100%;
        overflow: auto;
        width: 100%;
      }
    }
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body>
  <div id="loader" class="loader"></div>
  <header>
    <div class="header-layout">
      <div class="header-right"></div>
      <div class="header-left">
        <a href="index.html" class="cat-toggle" title="×—×–×¨×” ×œ× ×™×”×•×œ ×ª×§×¦×™×‘"></a>
        <button id="budgetSettingsBtn" class="settings-toggle" title="×”×’×“×¨×•×ª ×ª×§×¦×™×‘" onclick="toggleBudgetPanel()"><i class="fas fa-gear"></i></button>
      </div>
    </div>
  </header>
  
  <div class="app-container">
    <!-- Left Panel like in index.html -->
    <div class="left-panel" id="leftPanel">
      <button id="closePanelBtn" class="panel-close-btn"><i class="fas fa-times"></i></button>
      <div class="panel-section">
        <h3><i class="fas fa-wallet"></i> ××¦×‘ ×ª×§×¦×™×‘</h3>
        <div class="panel-stat">
          <span class="panel-stat-label">×ª×§×¦×™×‘ ×›×•×œ×œ:</span>
          <span class="panel-stat-value" id="totalBudgetValue2">0 â‚ª</span>
        </div>
        <div class="panel-stat">
          <span class="panel-stat-label">×ª×§×¦×™×‘ ××•×§×¦×”:</span>
          <span class="panel-stat-value" id="allocatedBudgetValue2">0 â‚ª</span>
        </div>
        <div class="panel-stat">
          <span class="panel-stat-label">×œ× ××•×§×¦×”:</span>
          <span class="panel-stat-value" id="unallocatedBudgetValue2">0 â‚ª</span>
        </div>
      </div>
      
      <div class="panel-section">
        <h3><i class="fas fa-th-large"></i> ×ª×¦×•×’×”</h3>
        <div class="panel-item" id="panel-grid-view">
          <i class="fas fa-th"></i>
          <span>×ª×¦×•×’×ª ×¨×©×ª</span>
        </div>
        <div class="panel-item" id="panel-list-view">
          <i class="fas fa-list"></i>
          <span>×ª×¦×•×’×ª ×¨×©×™××”</span>
        </div>
        <div class="panel-divider"></div>
        <div class="panel-item" id="panel-add-all">
          <i class="fas fa-chart-pie"></i>
          <span>×”×•×¡×£ ×›×œ ×”×’×¨×¤×™×</span>
        </div>
        <div class="panel-item" id="panel-close-all">
          <i class="fas fa-times"></i>
          <span>×¡×’×•×¨ ×›×œ ×”×’×¨×¤×™×</span>
        </div>
      </div>
      
      <div class="panel-section">
        <h3><i class="fas fa-tools"></i> × ×™×”×•×œ ×ª×§×¦×™×‘</h3>
        <div class="panel-item" id="panel-budget-settings">
          <i class="fas fa-gear"></i>
          <span>×”×’×“×¨×•×ª ×ª×§×¦×™×‘</span>
        </div>
        <div class="panel-item" id="panel-return-home">
          <i class="fas fa-home"></i>
          <span>×—×–×¨×” ×œ×“×£ ×”×¨××©×™</span>
        </div>
      </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
      <section class="card">
        <h2 style="margin-bottom:18px;">×‘×—×¨ ×§×˜×’×•×¨×™×•×ª ×œ×”×¦×’×”</h2>
        <div class="selector-bar" id="categorySelector"></div>
        <input type="text" id="catSearch" class="search-bar" placeholder="×—×¤×© ×§×˜×’×•×¨×™×”...">
        <button id="gridViewBtn" class="view-toggle active"><i class="fas fa-th"></i></button>
        <button id="listViewBtn" class="view-toggle"><i class="fas fa-list"></i></button>
        <div style="text-align:center; margin-top:14px;">
          <button id="addChartsBtn" class="selector-btn" style="background:var(--good);color:#fff;"><i class="fas fa-chart-pie"></i> ×”×•×¡×£ ×’×¨×¤×™×</button>
          <button id="closeChartsBtn" class="selector-btn" style="background:var(--danger);color:#fff;"><i class="fas fa-times"></i> ×¡×’×•×¨ ×›×œ ×”×’×¨×¤×™×</button>
        </div>
      </section>
      <section class="card">
        <div id="category-charts">
          <p class="no-cat">×œ× × ×•×¡×¤×• ×¢×“×™×™×Ÿ ×§×˜×’×•×¨×™×•×ª - × × ×œ×”×•×¡×™×£ :)</p>
        </div>
      </section>
    </div>
  </div>
  
  <!-- Budget Panel - Similar to settings panel in index.html -->
  <div id="budgetPanel" class="budget-panel">
    <div class="budget-panel-header">
      <button id="closeBudgetBtn" class="close-budget-btn"><i class="fas fa-times"></i></button>
    </div>
    
    <div class="budget-allocation-info">
      <div class="budget-info-row">
        <span class="budget-info-label">×ª×§×¦×™×‘ ×›×•×œ×œ:</span>
        <span class="budget-info-value" id="totalBudgetValue">900 â‚ª</span>
      </div>
      <div class="budget-info-row">
        <span class="budget-info-label">×ª×§×¦×™×‘ ××•×§×¦×”:</span>
        <span class="budget-info-value" id="allocatedBudgetValue">0 â‚ª</span>
      </div>
      <div class="budget-info-row">
        <span class="budget-info-label">×ª×§×¦×™×‘ ×œ× ××•×§×¦×”:</span>
        <span class="budget-info-value" id="unallocatedBudgetValue">900 â‚ª</span>
      </div>
    </div>
    
    <table class="budget-allocation-table">
      <thead>
        <tr>
          <th>×§×˜×’×•×¨×™×”</th>
          <th>×¡×›×•×</th>
          <th>×ª×§×¦×™×‘</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>ğŸ  ×©×›×¨ ×“×™×¨×”</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ’¡ ×—×©×‘×•× ×•×ª</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>â›½ ×“×œ×§</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ”¥ ×’×– (×’×¤×´×)</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ›’ ××•×›×œ</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ‰ ×‘×™×œ×•×™×™×</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ‘• ×‘×™×’×•×“</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ¦ ×¤×™× ×•×§×™×</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
        <tr><td>ğŸ“¦ ×›×œ×œ×™</td><td>0 â‚ª</td><td><button class="action-btn">×”×’×“×¨</button></td></tr>
      </tbody>
    </table>
  </div>
  
  <!-- Backdrop for budget panel -->
  <div id="backdrop" class="backdrop" onclick="closeAllPanels()"></div>
  <div id="toast" class="toast"></div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="utils.js"></script>
  <script>
    // Add event listeners for budget panel
    document.addEventListener('DOMContentLoaded', function() {
      const budgetSettingsBtn = document.getElementById('budgetSettingsBtn');
      const budgetPanel = document.getElementById('budgetPanel');
      const closeBudgetBtn = document.getElementById('closeBudgetBtn');
      const closePanelBtn = document.getElementById('closePanelBtn');
      const leftPanel = document.getElementById('leftPanel');
      const backdrop = document.getElementById('backdrop');
      
      // Function to toggle budget panel
      window.toggleBudgetPanel = function() {
        budgetPanel.classList.add('active');
        backdrop.classList.add('active');
        leftPanel.classList.remove('active');
      };
      
      // Function to toggle left panel
      window.toggleLeftPanel = function() {
        leftPanel.classList.add('active');
        backdrop.classList.add('active');
        budgetPanel.classList.remove('active');
      };
      
      // Function to close all panels
      window.closeAllPanels = function() {
        budgetPanel.classList.remove('active');
        leftPanel.classList.remove('active');
        backdrop.classList.remove('active');
      };
      
      // Close budget panel
      closeBudgetBtn.addEventListener('click', function() {
        budgetPanel.classList.remove('active');
        backdrop.classList.remove('active');
      });
      
      // Close left panel
      closePanelBtn.addEventListener('click', function() {
        leftPanel.classList.remove('active');
        backdrop.classList.remove('active');
      });
      
      // Close when clicking backdrop
      backdrop.addEventListener('click', closeAllPanels);
      
      // Left panel buttons
      document.getElementById('panel-grid-view').addEventListener('click', function() {
        document.getElementById('gridViewBtn').click();
        closeAllPanels();
      });
      
      document.getElementById('panel-list-view').addEventListener('click', function() {
        document.getElementById('listViewBtn').click();
        closeAllPanels();
      });
      
      document.getElementById('panel-add-all').addEventListener('click', function() {
        document.getElementById('addChartsBtn').click();
        closeAllPanels();
      });
      
      document.getElementById('panel-close-all').addEventListener('click', function() {
        document.getElementById('closeChartsBtn').click();
        closeAllPanels();
      });
      
      document.getElementById('panel-budget-settings').addEventListener('click', function() {
        toggleBudgetPanel();
      });
      
      document.getElementById('panel-return-home').addEventListener('click', function() {
        window.location.href = 'index.html';
      });
      
      // Sync the budget values between main panel and side panel
      function syncBudgetValues() {
        document.getElementById('totalBudgetValue2').textContent = document.getElementById('totalBudgetValue').textContent;
        document.getElementById('allocatedBudgetValue2').textContent = document.getElementById('allocatedBudgetValue').textContent;
        document.getElementById('unallocatedBudgetValue2').textContent = document.getElementById('unallocatedBudgetValue').textContent;
      }
      
      // Call this when budget values update
      const budgetObserver = new MutationObserver(syncBudgetValues);
      budgetObserver.observe(document.getElementById('totalBudgetValue'), { characterData: true, childList: true, subtree: true });
      
      // Initial sync
      syncBudgetValues();
    });

    // ×©×™×¤×•×¨ ×‘×™×¦×•×¢×™× ×•×’×œ×™×œ×”
    document.addEventListener('DOMContentLoaded', function() {
      // ×”×‘×˜×—×ª ×’×œ×™×œ×”
      document.body.style.minHeight = window.innerHeight + 100 + 'px';
      
      // ××™×œ×•×¥ ××¦×‘ ×’×œ×™×œ×”
      setTimeout(function() {
        window.scrollTo(0, 1);
        window.scrollTo(0, 0);
      }, 100);
      
      // ×ª×’×•×‘×” ××”×™×¨×” ×œ×›×¤×ª×•×¨×™×
      const buttons = document.querySelectorAll('button, .cat-toggle');
      buttons.forEach(function(button) {
        button.addEventListener('touchstart', function() {
          this.style.transform = 'scale(0.95)';
        });
        
        button.addEventListener('touchend', function() {
          this.style.transform = 'scale(1)';
        });
      });
      
      // ×”×•×¡×¤×ª ××¨×•×•×— ×‘×ª×—×ª×™×ª
      const spacer = document.createElement('div');
      spacer.style.height = '150px';
      spacer.style.width = '100%';
      spacer.style.background = 'var(--bg-gradient)';
      document.body.appendChild(spacer);
      
      // Fix iOS scroll bounce
      if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
        document.body.style.background = 'var(--bg-gradient)';
        document.documentElement.style.background = 'var(--bg-gradient)';
      }
    });
  </script>
  <script src="categories.js"></script>
  <footer>Â© 2026 × ×™×”×•×œ ×ª×§×¦×™×‘</footer>
</body>
</html> 